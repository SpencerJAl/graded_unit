{"changed":false,"filter":false,"title":"update.js","tooltip":"/PHP/EditAPI/update.js","value":"$(document).ready(function(){\n \n    // show html form when 'update product' button was clicked\n    $(document).on('click', '.update-product-button', function(){\n          var id = $(this).attr('data-id');\n          $(\".row\").hide();\n          $(\"h1\").html(\"Update Product\");\n      \n        // read one record based on given product id\n        $.getJSON(\"read1.php?id=\"+id, function(data){\n \n        // values will be used to fill out our form\n       var name = data.name;\n       var descript = data.descript;\n       var price = data.price;\n       var image_path = data.image_path;\n    \n        // we used the 'required' html5 property to prevent empty fields\n        var update_product = \"\";\n        update_product +=\"<form id='update-product-form' action='#' method='post' border='0'>\";\n        update_product +=\"<table id='update-table' class='table'>\";\n \n        // name field\n        update_product +=\"<tr>\";\n        update_product +=\"<td>Name</td>\";\n        update_product +=\"<td><input value=\\\"\" + name + \"\\\" type='text' name='name' class='form-control' required /></td>\";\n        update_product +=\"</tr>\";\n \n        // price field\n        update_product +=\"<tr>\";\n        update_product +=\"<td>Price</td>\";\n        update_product +=\"<td><input value=\\\"\" + price + \"\\\" type='number' min='1' name='price' class='form-control' required /></td>\";\n        update_product +=\"</tr>\";\n \n        // description field\n        update_product +=\"<tr>\";\n        update_product +=\"<td>Description</td>\";\n        update_product +=\"<td><textarea name='descript' class='form-control' required>\" + descript + \"</textarea></td>\";\n        update_product +=\"</tr>\";\n \n        \n        // image_path\n        update_product +=\"<tr>\";\n        update_product +=\"<td>Image name and file type</td>\";\n        update_product +=\"<td><input value=\\\"\" + image_path + \"\\\" type='text' name='image_path' class='form-control' required /></td>\";\n        update_product +=\"</tr>\";\n\n        // hidden 'product id' to identify which record to delete\n        update_product +=\"<tr>\";\n        update_product +=\"<td><input value=\\\"\" + id + \"\\\" name='id' type='hidden' /></td>\";\n \n        // button to submit form\n        update_product +=\"<td>\";\n        update_product +=\"<button type='submit' class='btn btn-info'>\";\n        update_product +=\"Update Product\";\n        update_product +=\"</button>\";\n        update_product +=\"</td>\";\n        update_product +=\"</tr>\";\n        \n        // button to return to form\n        update_product +=\"<td>\";\n        update_product +=\"<button type='submit' class='btn btn-info' href='index.html'>\";\n        update_product +=\"Back\";\n        update_product +=\"</button>\";\n        update_product +=\"</td>\";\n        update_product +=\"</tr>\";\n \n        update_product +=\"</table>\";\n        update_product +=\"</form>\";\n    \n        $(\"#app\").append(update_product);\n        \n    });\n        \n});\n\n   \n     // will run if 'update product' form was submitted\n    $(document).on('submit', '#update-product-form', function(){\n     \n         var form_data = JSON.stringify($(this).serializeObject());\n         // submit form data to api\n         $.ajax({\n          url: \"update.php\",\n         type: \"POST\",\n         contentType: 'application/json',\n         data: form_data,\n         success: function(result) {\n         // product was created, go back to products list\n         $(\".row\").show();\n         $(\"h1\").html(\"Product Inventory\");\n         $(\"#update-product-form\").remove();\n         $(\"#update-table\").remove();\n         showProducts();\n            },\n         error: function(xhr, resp, text) {\n        // show error to console\n        console.log(xhr, resp, text);\n           }\n    });\n     \n    return false;\n    });\n\n    \n});","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":840,"scrollleft":0,"selection":{"start":{"row":56,"column":33},"end":{"row":56,"column":33},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":59,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1495045480132}